<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interface de l'application</title>
<style>
:root {
  --border-color: #555;
  --transition: 0.6s ease-in-out;
}

body {
  background-color: #0d121c;
  font-family: sans-serif;
  margin: 0;
  padding: 5% 5% 0 5%;    /* 5% en haut, 5% à droite, 0 en bas, 5% à gauche */
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
}

.container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  max-width: 420px;
}

/* ✅ Texte défilant */
.marquee {
  border: 1.5px solid var(--border-color);
  border-radius: 12px;
  padding: 8px 12px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  color: #fff;
  font-weight: bold;
  font-size: 14px;
}

.marquee span {
  display: inline-block;
  padding-left: 100%;
  animation: marquee 20s linear infinite;
}

@keyframes marquee {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}

.top-section {
  position: relative;
  height: 200px;
  border-radius: 12px;
  overflow: hidden;
  border: 1.5px solid var(--border-color);
  transition: border-color var(--transition), box-shadow var(--transition);
}

.slider {
  position: relative;
  width: 100%;
  height: 100%;
}

.slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  opacity: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
  font-size: 18px;
  font-weight: bold;
  transition: opacity var(--transition);
  cursor: pointer;
}

.slide.active {
  opacity: 1;
  z-index: 2;
}

.dots {
  position: absolute;
  bottom: 10px;
  right: 10px;
  display: flex;
  gap: 5px;
  z-index: 10;
}

.dot {
  width: 8px;
  height: 8px;
  background-color: #fff;
  border-radius: 50%;
  opacity: 0.4;
  transition: opacity 0.3s ease, transform 0.3s ease;
  cursor: pointer;
}

.dot.active {
  opacity: 1;
  transform: scale(1.1);
}

.bottom-section {
  display: flex;
  gap: 12px;
}

.club-button, .play-button {
  flex-grow: 1;
  flex-basis: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  font-weight: bold;
  height: 100px;
  border: 1.5px solid var(--border-color);
  transition: border-color var(--transition), box-shadow var(--transition), transform 0.2s ease;
  box-sizing: border-box;
  color: #fff;
  font-size: 16px;
  overflow: hidden;
}

.club-button {
  background-size: cover;
  background-position: center;
  cursor: pointer;
}

.play-button video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
  cursor: pointer;
}

.club-button:hover, .play-button:hover, .slide:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 15px var(--border-color);
}

/* Modal vidéo */
#videoModal {
  display: none;
  position: fixed;
  top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
#videoModal video {
  max-width: 90%;
  max-height: 90%;
}
#videoModal span {
  position: absolute;
  top:20px;
  right:30px;
  font-size: 30px;
  color:white;
  cursor:pointer;
}
</style>
  
</head>
<body>
<div class="container">

  <!-- ✅ Texte défilant -->
  <div id="marquee" class="marquee">
    <span>Cliquez sur les images pour plus d’infos. Achetez vos Pass Star et Points FC, payez en Gourdes. Chaque week-end, gagnez jusqu’à 16 000 HTG ! Places limitées à 16 — réservez vite !.</span>
  </div>

  <!-- Slider -->
  <div id="top-section" class="top-section">
    <div id="slider" class="slider">
      <div class="slide active" style="background-image: url('img1.png');" data-link="tournoi-fcmobile-index.html"></div>
      <div class="slide" style="background-image: url('./img2.png');" data-link="./calendrier-fcmobile-samedi.html"></div>
      <div class="slide" style="background-image: url('./img3.png');" data-link="./calendrier-fcmobile-dimanche.html"></div>
      <div class="slide" style="background-image: url('./img4.png');" data-link="./reglements-fcmobile.html"></div>
      <div class="slide" style="background-image: url('./img5.png');" data-link="./pass-star.html"></div>
    </div>
    <div class="dots">
      <div class="dot active" data-index="0"></div>
      <div class="dot" data-index="1"></div>
      <div class="dot" data-index="2"></div>
      <div class="dot" data-index="3"></div>
      <div class="dot" data-index="4"></div>
    </div>
  </div>

  <!-- Carrés du bas -->
  <div class="bottom-section">
    <div id="club-button" class="club-button" style="background-image: url('img6.png');"></div>
    <div id="play-button" class="play-button">
      <video autoplay muted loop>
        <source src="video1.mp4" type="video/mp4">
        Ton navigateur ne supporte pas la lecture de vidéos.
      </video>
    </div>
  </div>
</div>

<!-- Modal pour vidéo agrandie -->
<div id="videoModal">
  <span id="closeModal">&times;</span>
  <video id="modalVideo" controls autoplay></video>
</div>

<script>
const slides = document.querySelectorAll('.slide');
const dots = document.querySelectorAll('.dot');
const topSection = document.getElementById('top-section');
const clubButton = document.getElementById('club-button');
const playButton = document.getElementById('play-button');
const videoModal = document.getElementById('videoModal');
const modalVideo = document.getElementById('modalVideo');
const closeModal = document.getElementById('closeModal');
const marquee = document.getElementById('marquee');

let currentSlideIndex = 0;
let startX = 0;
let isDragging = false;
let autoSlideTimer;

// Couleur moyenne
function getAverageColor(img, callback) {
  const canvas = document.createElement('canvas');
  canvas.width = img.naturalWidth || img.videoWidth || img.width;
  canvas.height = img.naturalHeight || img.videoHeight || img.height;
  const ctx = canvas.getContext('2d');
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
  const data = ctx.getImageData(0,0,canvas.width,canvas.height).data;
  let r=0,g=0,b=0,count=0;
  for(let i=0;i<data.length;i+=4){ r+=data[i]; g+=data[i+1]; b+=data[i+2]; count++; }
  r=Math.floor(r/count); g=Math.floor(g/count); b=Math.floor(b/count);
  callback(`rgb(${r},${g},${b})`);
}

function updateBorderColor() {
  const activeSlide = slides[currentSlideIndex];
  const img = new Image();
  img.crossOrigin = "Anonymous";

  if(activeSlide.style.backgroundImage){
    img.src = activeSlide.style.backgroundImage.slice(5,-2);
    img.onload = ()=>getAverageColor(img,color=>{
      topSection.style.borderColor=color;
      clubButton.style.borderColor=color;
      playButton.style.borderColor=color;
      marquee.style.borderColor=color; // ✅ MAJ du texte défilant
    });
  }

  const video = playButton.querySelector('video');
  if(video){
    const tmpCanvas = document.createElement('canvas');
    tmpCanvas.width = video.videoWidth||video.offsetWidth;
    tmpCanvas.height = video.videoHeight||video.offsetHeight;
    const ctx=tmpCanvas.getContext('2d');
    ctx.drawImage(video,0,0,tmpCanvas.width,tmpCanvas.height);
    try {
      const data=ctx.getImageData(0,0,tmpCanvas.width,tmpCanvas.height).data;
      let r=0,g=0,b=0,count=0;
      for(let i=0;i<data.length;i+=4){r+=data[i]; g+=data[i+1]; b+=data[i+2]; count++;}
      r=Math.floor(r/count); g=Math.floor(g/count); b=Math.floor(b/count);
      const color=`rgb(${r},${g},${b})`;
      playButton.style.borderColor=color;
      marquee.style.borderColor=color; // ✅ MAJ aussi avec la vidéo
    } catch(e){ console.log("Vidéo non accessible pour couleur"); }
  }
}

// Met à jour slider et points
function updateSlider() {
  slides.forEach((slide,index)=>slide.classList.toggle('active',index===currentSlideIndex));
  dots.forEach((dot,index)=>dot.classList.toggle('active',index===currentSlideIndex));
  updateBorderColor();
}

// Défilement automatique
function startAutoSlide() {
  stopAutoSlide();
  autoSlideTimer = setInterval(()=>{
    currentSlideIndex = (currentSlideIndex + 1) % slides.length;
    updateSlider();
  }, 5000);
}
function stopAutoSlide() { if(autoSlideTimer) clearInterval(autoSlideTimer); }

// Swipe
topSection.addEventListener('touchstart',(e)=>{startX=e.touches[0].clientX; isDragging=true; stopAutoSlide();});
topSection.addEventListener('touchmove',(e)=>{if(!isDragging) return; e.preventDefault();},{passive:false});
topSection.addEventListener('touchend',(e)=>{
  if(!isDragging) return;
  isDragging=false;
  const diff=e.changedTouches[0].clientX-startX;
  const threshold=topSection.offsetWidth/4;
  if(diff>threshold) currentSlideIndex=(currentSlideIndex-1+slides.length)%slides.length;
  else if(diff<-threshold) currentSlideIndex=(currentSlideIndex+1)%slides.length;
  updateSlider();
  startAutoSlide();
});

// Clic sur points
dots.forEach(dot=>{dot.addEventListener('click',()=>{currentSlideIndex=parseInt(dot.dataset.index); updateSlider();});});

// Clic sur slides → ouvre page
slides.forEach(slide=>{
  slide.addEventListener('click',()=>{ 
    const link = slide.dataset.link;
    if(link) window.location.href = link;
  });
});

// Clic sur vidéo → ouvre modal
playButton.querySelector('video').addEventListener('click',()=>{
  modalVideo.src = playButton.querySelector('video source').src;
  videoModal.style.display='flex';
});

// Fermer modal
closeModal.addEventListener('click',()=>{
  videoModal.style.display='none';
  modalVideo.pause();
  modalVideo.src='';
});
videoModal.addEventListener('click',(e)=>{
  if(e.target===videoModal){ videoModal.style.display='none'; modalVideo.pause(); modalVideo.src=''; }
});

updateSlider();
startAutoSlide();
</script>

</body>
</html>
